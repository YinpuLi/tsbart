<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>tsbcf: Fits tsbcf model for continuous or binary responses. — tsbcf • tsbart</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="tsbcf: Fits tsbcf model for continuous or binary responses. — tsbcf" />

<meta property="og:description" content="This function implements the tsbart method for a continuous response in the causal inference setting, smoothing over the covariate tgt, with unsmoothed covariates x and treatment indicator z. Predicts function values f(x,t,z) at a set of new time points and covariates.
Augmented model formulation is: y(t) = alpha(t) + eta_control * m(x,t) + eta_moderate * a(x,t)*z + epsilon
In the case of binary response, all" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">tsbart</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/myvignette.html">tsbart Vignette</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>tsbcf: Fits tsbcf model for continuous or binary responses.</h1>
    
    <div class="hidden name"><code>tsbcf.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function implements the tsbart method for a continuous response in the causal inference setting, smoothing over the covariate tgt, with unsmoothed covariates x and treatment indicator z. Predicts function values f(x,t,z) at a set of new time points and covariates.</p>
<p>Augmented model formulation is: y(t) = alpha(t) + eta_control * m(x,t) + eta_moderate * a(x,t)*z + epsilon</p>
<p>In the case of binary response, all</p>
    
    </div>

    <pre class="usage"><span class='fu'>tsbcf</span>(<span class='no'>y</span>, <span class='no'>pihat</span>, <span class='no'>pihatpred</span>, <span class='no'>z</span>, <span class='no'>zpred</span>, <span class='no'>tgt</span>, <span class='no'>tpred</span>,
         <span class='no'>x_control</span>, <span class='no'>x_moderate</span>,
         <span class='no'>xpred_control</span>, <span class='no'>xpred_moderate</span>,
         <span class='no'>nburn</span>, <span class='no'>nsim</span>, <span class='kw'>ntree_control</span><span class='kw'>=</span><span class='fl'>200</span>, <span class='kw'>ntree_moderate</span><span class='kw'>=</span><span class='fl'>200</span>,
         <span class='kw'>lambda</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>sigq</span><span class='kw'>=</span><span class='fl'>.9</span>, <span class='kw'>sighat</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>nu</span><span class='kw'>=</span><span class='fl'>3</span>,
         <span class='kw'>base_control</span><span class='kw'>=</span><span class='fl'>.95</span>, <span class='kw'>power_control</span><span class='kw'>=</span><span class='fl'>2</span>,
         <span class='kw'>base_moderate</span><span class='kw'>=</span><span class='fl'>.25</span>, <span class='kw'>power_moderate</span><span class='kw'>=</span><span class='fl'>3</span>,
         <span class='kw'>ecross</span><span class='kw'>=</span><span class='fl'>1</span>, <span class='kw'>probit</span><span class='kw'>=</span><span class='fl'>FALSE</span>, <span class='kw'>yobs</span><span class='kw'>=</span><span class='kw'>NULL</span>, <span class='kw'>verbose</span><span class='kw'>=</span><span class='no'>T</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>y</th>
      <td><p>Length n vector with continuous response values.</p></td>
    </tr>
    <tr>
      <th>pihat</th>
      <td><p>Length n vector with propensity score estimates.</p></td>
    </tr>
    <tr>
      <th>pihatpred</th>
      <td><p>Length npred vector with out-of-sample propensity score estimates.</p></td>
    </tr>
    <tr>
      <th>z</th>
      <td><p>Length n vector of 0/1 indicators for each observation. 1 = treatment group, 0 = control group.</p></td>
    </tr>
    <tr>
      <th>zpred</th>
      <td><p>Length npred vector of 0/1 indicators for each out-of-sample observation. 1 = treatment group, 0 = control group.</p></td>
    </tr>
    <tr>
      <th>tgt</th>
      <td><p>Length n vector with discrete time points.</p></td>
    </tr>
    <tr>
      <th>tpred</th>
      <td><p>Length npred vector with out-of-sample discrete time points.</p></td>
    </tr>
    <tr>
      <th>x_control</th>
      <td><p>A (n x p_control) data frame or matrix containing the covariates for the prognostic effect which are not to be smoothed over. Observations must be in columns. If data frame is set up in usual observations (rows) and covariates (columns) form, input t(x).</p></td>
    </tr>
    <tr>
      <th>x_moderate</th>
      <td><p>A (n x p_moderate) data frame or matrix containing the covariates for the treatment effect which are not to be smoothed over. Observations must be in columns. If data frame is set up in usual observations (rows) and covariates (columns) form, input t(x).</p></td>
    </tr>
    <tr>
      <th>xpred_control</th>
      <td><p>A (npred x p_control) data frame or matrix containing out-of-sample covariates.  Observations must be in columns.  If data frame is set up in usual observations (rows) and covariates (columns) form, input t(x).</p></td>
    </tr>
    <tr>
      <th>xpred_moderate</th>
      <td><p>A (npred x p_moderate) data frame or matrix containing out-of-sample prognostic covariates. Observations must be in columns. If data frame is set up in usual observations (rows) and covariates (columns) form, input t(x).</p></td>
    </tr>
    <tr>
      <th>nburn</th>
      <td><p>Number of burn-in MCMC iterations.</p></td>
    </tr>
    <tr>
      <th>nsim</th>
      <td><p>Number of MCMC iterations to save after burn-in.</p></td>
    </tr>
    <tr>
      <th>ntree_control</th>
      <td><p>Number of trees for control fit.</p></td>
    </tr>
    <tr>
      <th>ntree_moderate</th>
      <td><p>Number of trees for treatment fit.</p></td>
    </tr>
    <tr>
      <th>lambda</th>
      <td><p>Scale parameter in the chisq prior sigma^2.  Defaults to NULL, ie being estimated from sigq and sighat. Not appicable for binary case.</p></td>
    </tr>
    <tr>
      <th>sigq</th>
      <td><p>Calibration quantile in the chisq prior on sigma^2.  Defaults to .9. Not applicable for binary case.</p></td>
    </tr>
    <tr>
      <th>sighat</th>
      <td><p>Calibration estimate for chisq prior on sigma^2.  Defaults to being estimated from data using linear model.  Not applicable for binary case.</p></td>
    </tr>
    <tr>
      <th>nu</th>
      <td><p>Degrees of freedom in the chisq prior on sigma^2. Defaults to 3. Not applicable for binary case.</p></td>
    </tr>
    <tr>
      <th>base_control</th>
      <td><p>Base for prognostic tree prior.  Defaults to 0.95.</p></td>
    </tr>
    <tr>
      <th>power_control</th>
      <td><p>Power for prognostic tree prior.  Defaults to 2.0.</p></td>
    </tr>
    <tr>
      <th>base_moderate</th>
      <td><p>Base for treatment tree prior.  Defaults to 0.25.</p></td>
    </tr>
    <tr>
      <th>power_moderate</th>
      <td><p>Power for treatment tree prior.  Defaults to 3.0.</p></td>
    </tr>
    <tr>
      <th>ecross</th>
      <td><p>Number of expected times f(x,t) crosses the mean response over time for prognostic fit. We suggest a default value of 1.</p></td>
    </tr>
    <tr>
      <th>probit</th>
      <td><p>0 indicates continuous response; 1 indicates probit response.  Default is 0.  If 1, then yobs must be populated.</p></td>
    </tr>
    <tr>
      <th>yobs</th>
      <td><p>Length n vector of binary responses; only populated for probit=1 case.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Boolean for writing progress report to console.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A list containing the following items:</p>
<dt>mcmcdraws_control</dt><dd><p>A (nsim x n) matrix containing the in-sample MCMC draws for the progostic effect.</p></dd>

<dt>mcmcdraws_moderate</dt><dd><p>A (nsim x n) matrix containing the in-sample MCMC draws for the treatment effect.</p></dd>

<dt>mcmcdraws_oos_control</dt><dd><p>A (nsim x npred) matrix containing the out-of-sample MCMC draws for the tsbart fit.</p></dd>

<dt>mcmcdraws_oos_moderate</dt><dd><p>A (nsim x npred) matrix containing the out-of-sample MCMC draws for the prognostic.</p></dd>

<dt>sigma</dt><dd><p>A vector containing the MCMC draws for sigma.  Returns 1 in the probit case.</p></dd>

<dt>eta_control</dt><dd><p>A vector containing the MCMC draws for prognostic eta.</p></dd>

<dt>eta_moderate</dt><dd><p>A vector containing the MCMC draws for treatment eta.</p></dd>

<dt>gamma_control</dt><dd><p>A vector containing the MCMC draws for prognostic gamma.</p></dd>

<dt>gamma_moderate</dt><dd><p>A vector containing the MCMC draws for treatment gamma.</p></dd>

<dt>postpred</dt><dd><p>A (nsim x n) matrix of posterior predictive draws for in-sample data.</p></dd>

<dt>postpred_oos</dt><dd><p>A (nsim x npred) matrix of posterior predictive draws for out-of-sample data.</p></dd>

    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"># NOT RUN {
Function call example is as follows.

# Fit model
fit = tsbcf(y, pihat, pihatpred, z, zpred, tgt, tpred,
                  x_control, x_moderate,
                  xpred_control, xpred_moderate,
                  nburn, nsim, ntree_control=200, ntree_moderate=200,
                  lambda=NULL, sigq=.9, sighat=NULL, nu=3,
                  base_control=.95, power_control=2,
                  base_moderate=.25, power_moderate=3,
                  ecross=1, probit=FALSE, yobs=NULL, verbose=T)

# }
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

    <h2>Author</h2>
    <p>Jennifer E. Starling</p>
  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jennifer Starling.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.2.0.9000.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

